/*! OpenComponents client v1.0.4 | (c) 2015-2018 OpenTable, Inc. | https://github.com/opencomponents/oc-client-browser/tree/master/LICENSES */
!function(e,n){var r=function(e,n){return e instanceof(n||Array)},t=document,o="getElementsByTagName",c="length",a="readyState",i="onreadystatechange",s=t[o]("script"),d=s[s[c]-1],u=d.innerHTML.replace(/^\s+|\s+$/g,"");if(!e.ljs){var f=d.src.match(/checkLoaded/)?1:0,l=t[o]("head")[0]||t.documentElement,p=function(e){var n={};return n.u=e.replace(/#(=)?([^#]*)?/g,function(e,r,t){return n[r?"f":"i"]=t,""}),n},m=function(e,n,r){var o,c=t.createElement(e);r&&(c[a]?c[i]=function(){"loaded"!==c[a]&&"complete"!==c[a]||(c[i]=null,r())}:c.onload=r);for(o in n)n[o]&&(c[o]=n[o]);l.appendChild(c)},h=function(e,n){if(this.aliases&&this.aliases[e]){var t=this.aliases[e].slice(0);return r(t)||(t=[t]),n&&t.push(n),this.load.apply(this,t)}if(r(e)){for(var o=e[c];o--;)this.load(e[o]);return n&&e.push(n),this.load.apply(this,e)}return e.match(/\.css\b/)?this.loadcss(e,n):this.loadjs(e,n)},v={},y={aliases:{},loadjs:function(e,r){var t=p(e);return e=t.u,v[e]===!0?(r&&r(),this):v[e]!==n?(r&&(v[e]=function(e,n){return function(){e&&e(),n&&n()}}(v[e],r)),this):(v[e]=function(n){return function(){v[e]=!0,n&&n()}}(r),r=function(){v[e]()},m("script",{type:"text/javascript",src:e,id:t.i,onerror:function(e){if(t.f){var n=e.currentTarget;n.parentNode.removeChild(n),m("script",{type:"text/javascript",src:t.f,id:t.i},r)}}},r),this)},loadcss:function(e,n){var r=p(e);return e=r.u,v[e]||m("link",{type:"text/css",rel:"stylesheet",href:e,id:r.i}),v[e]=!0,n&&n(),this},load:function(){var e=arguments,t=e[c];return 1===t&&r(e[0],Function)?(e[0](),this):(h.call(this,e[0],t<=1?n:function(){y.load.apply(y,[].slice.call(e,1))}),this)},addAliases:function(e){for(var n in e)this.aliases[n]=r(e[n])?e[n].slice(0):e[n];return this}};if(f){var g,j,x,b;for(g=0,j=s[c];g<j;g++)(b=s[g].getAttribute("src"))&&(v[b.replace(/#.*$/,"")]=!0);for(x=t[o]("link"),g=0,j=x[c];g<j;g++)("stylesheet"===x[g].rel||"text/css"===x[g].type)&&(v[x[g].getAttribute("href").replace(/#.*$/,"")]=!0)}e.ljs=y}d.src&&u&&m("script",{innerHTML:u})}(window);var oc=oc||{};!function(e,n){"function"==typeof define&&define.amd?define(["exports","jquery"],function(r,t){t.extend(r,e.oc),n(e.oc=r,t,e.ljs,e.document,e.window)}):"object"==typeof exports&&"string"!=typeof exports.nodeName?n(exports,require("jquery"),e.ljs,e.document,e.window):n(e.oc=oc,e.$,e.ljs,e.document,e.window)}(this,function(e,n,r,t,o){function c(e){e=Array.isArray(e)?e:[e],e.forEach(function(e){_[e.type]||(_[e.type]={externals:e.externals})})}if(oc.conf=oc.conf||{},oc.cmd=oc.cmd||[],oc.renderedComponents=oc.renderedComponents||{},oc.status=oc.status||!1,oc.status)return oc;oc.status="loading";var a="https://cdnjs.cloudflare.com/ajax/libs/",i=oc.conf.retryInterval||5e3,s=oc.conf.retryLimit||30,d=oc.conf.retrySendNumber||!0,u=oc.conf.pollingInterval||500,f=oc.conf.tag||"oc-component",l="baseUrl parameter is required",p="Href parameter missing",m="name parameter is required",h="Failed to load {0} component {1} times. Giving up".replace("{1}",s),v="Error getting compiled view: {0}",y="Error rendering component: {0}, error: {1}",g="Failed to retrieve the component. Retrying in {0} seconds...".replace("{0}",i/1e3),j='Error loading component: view engine "{0}" not supported',x=oc.conf.loadingMessage||"",b="Component '{0}' correctly rendered",q="Unrendered component found. Trying to retrieve it...",$=a+"jquery-ajaxtransport-xdomainrequest/1.0.3/jquery.xdomainrequest.min.js",C=a+"jquery/1.11.2/jquery.min.js",w=a+"handlebars.js/4.0.6/handlebars.runtime.min.js",E=a+"jade/1.11.0/runtime.min.js";if(oc.conf.s3&&"string"==typeof oc.conf.s3.path&&oc.conf.s3.componentsDir){var A=oc.conf.s3.path;A.startsWith("http")||(A="https:"+A);var T=A+oc.conf.s3.componentsDir+"/an-3rdparty/";$=T+"jquery-ajax-transport-xdomainrequest-1.0.3.js",C=T+"jquery-3.0.0.js",w=T+"handlebars-4.0.6.js",E=T+"jade-1.11.0.js"}var k=oc.conf.debug||!1,H=function(){},L=o.navigator.userAgent,M=!!L.match(/MSIE 9/),U=!1,N=!1,O={},I=function(e){return"boolean"==typeof e},D={error:function(e){return console.log(e)},info:function(e){return!!k&&console.log(e)}},_={"oc-template-handlebars":{externals:[{global:"Handlebars",url:w}]},"oc-template-jade":{externals:[{global:"jade",url:E}]}};oc.conf.templates&&c(oc.conf.templates);var B=function(e,n,r){return void 0===O[e]&&(O[e]=s),O[e]<=0?r():(setTimeout(function(){n(s-O[e]+1)},i),void O[e]--)},F=function(e,n){if(e&&n){var r=oc.$.param(n);return e.indexOf("?")>-1?e+"&"+r:e+"?"+r}return e};oc.registerTemplates=function(e){return c(e),oc.ready(oc.renderUnloadedComponents),_},oc.require=function(e,n,t){"function"==typeof n&&(t=n,n=e,e=void 0),"string"==typeof e&&(e=[e]);var c=function(){var n=o;if("undefined"==typeof e)return!0;for(var r=0;r<e.length;r++)if(n=n[e[r]],!n)return!0;return!1},a=function(){var n=o;if("undefined"!=typeof e){for(var r=0;r<e.length;r++)if(n=n[e[r]],!n)return;return n}};c()?r.load(n,function(){t(a())}):t(a())};var S=function(e,n,r){if("function"==typeof n&&(r=n,n=[]),0===e.length)return r();var t=e[0];oc.require(t.global,t.url,function(){var o=t,c=n.concat(o),a=e.slice(1);S(a,c,r)})},P=function(e,n,r){n.id=Math.floor(9999999999*Math.random()),e.html(n.html),e.attr("id",n.id),e.attr("data-rendered",!0),e.attr("data-rendering",!1),e.attr("data-version",n.version),n.key&&e.attr("data-hash",n.key),n.name&&(e.attr("data-name",n.name),oc.renderedComponents[n.name]=n.version,oc.events.fire("oc:rendered",n)),r()};oc.build=function(e){if(!e.baseUrl)throw l;if(!e.name)throw m;var n=function(e){return e=e||"","/"!==e.slice(-1)&&(e+="/"),e},r=n(e.baseUrl)+n(e.name);if(e.version&&(r+=n(e.version)),e.parameters){r+="?";for(var t in e.parameters)e.parameters.hasOwnProperty(t)&&(r+=t+"="+e.parameters[t]+"&");r=r.slice(0,-1)}return"<"+f+' href="'+r+'"></'+f+">"},oc.events={},oc.ready=function(e){if(U)return e();if(N)oc.cmd.push(e);else{N=!0;var n=function(e,n){M&&!e.IE_POLYFILL_LOADED?oc.require($,n):n()},r=function(){U=!0,N=!1,oc.events=function(){var e=oc.$({});return{fire:function(n,r){return e.trigger(n,r)},on:function(n,r){return e.on(n,r||H)},reset:function(){return e.off()}}}(),e(),oc.events.fire("oc:ready",oc),oc.status="ready";for(var n=0;n<oc.cmd.length;n++)oc.cmd[n](oc);oc.cmd={push:function(e){e(oc)}}},t=!!o.jQuery,c=!!o.$;oc.require("jQuery",C,function(e){n(e,function(){t||c?oc.$=e:oc.$=e.noConflict(),r()})})}},oc.render=function(e,n,r){oc.ready(function(){var t=e.type;"jade"===t&&(t="oc-template-jade"),"handlebars"===t&&(t="oc-template-handlebars");var c=_[t];c?oc.require(["oc","components",e.key],e.src,function(a){a?S(c.externals,function(){if("oc-template-handlebars"===t)try{var e=o.Handlebars.template(a,[]);r(null,e(n))}catch(c){r(c.toString())}else r(null,a(n))}):r(v.replace("{0}",e.src))}):r(j.replace("{0}",e.type))})},oc.renderNestedComponent=function(e,n){oc.ready(function(){var r=e.attr("data-rendering"),t=e.attr("data-rendered"),o=I(r)?r:"true"===r,c=I(t)?t:"true"===t;o||c?setTimeout(n,u):(D.info(q),e.attr("data-rendering",!0),e.html('<div class="oc-loading">'+x+"</div>"),oc.renderByHref(e.attr("href"),function(r,t){return r||!t?(e.html(""),D.error(r),n()):void P(e,t,n)}))})},oc.renderByHref=function(e,n,r){var t=r,o=n;"function"==typeof n&&(t=n,o=0),oc.ready(function(){if(""===e)return t(y.replace("{1}",p));var n=e;d&&(n=F(n,{__oc_Retry:o})),oc.$.ajax({url:n,headers:{Accept:"application/vnd.oc.unrendered+json"},contentType:"text/plain",crossDomain:!0,async:!0,success:function(e){if("unrendered"===e.renderMode)oc.render(e.template,e.data,function(n,r){return n?t(y.replace("{0}",e.href).replace("{1}",n)):(D.info(b.replace("{0}",e.template.src)),void t(null,{html:r,key:e.template.key,version:e.version,name:e.name}))});else if("rendered"===e.renderMode){if(D.info(b.replace("{0}",e.href)),0===e.html.indexOf("<"+f)){var n=e.html.slice(e.html.indexOf(">")+1),r=n.slice(0,n.lastIndexOf("<"));e.html=r}t(null,{html:e.html,version:e.version,name:e.name})}},error:function(){D.error(g),B(e,function(n){oc.renderByHref(e,n,t)},function(){t(h.replace("{0}",e))})}})})},oc.renderUnloadedComponents=function(){oc.ready(function(){var e=oc.$(f+"[data-rendered!=true]"),n=e.length,r=function(){n--,n||oc.renderUnloadedComponents()};if(n>0)for(var t=0;t<e.length;t++)oc.renderNestedComponent(oc.$(e[t]),r)})},oc.load=function(e,n,r){oc.ready(function(){if("function"!=typeof r&&(r=H),oc.$(e)){oc.$(e).html("<"+f+' href="'+n+'" />');var t=oc.$(f,e);oc.renderNestedComponent(t,function(){r(t)})}})},oc.ready(oc.renderUnloadedComponents),e=oc}),oc.clientVersion="1.0.4";
//# sourceMappingURL=oc-client.min.map